/*! Prelodr v1.0.4 | MIT (c) 2015 Jos√© Luis Quintana */
"use strict";function _typeof(e){return e&&e.constructor===Symbol?"symbol":typeof e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Queu=function(){function e(){_classCallCheck(this,e),this.queue=[],this.offset=0}return _createClass(e,[{key:"getLength",value:function(){return this.queue.length-this.offset}},{key:"isEmpty",value:function(){return 0===this.queue.length}},{key:"add",value:function(e){this.queue.push(e),this.offset+=1}},{key:"shift",value:function(){var e=null;return this.queue.length&&(e=this.queue.shift()),e}},{key:"pop",value:function(){var e=null;return this.queue.length&&(e=this.queue.pop()),e}},{key:"last",value:function(){return this.queue.length>0?this.queue[this.queue.length-1]:null}},{key:"first",value:function(){return this.queue.length>0?this.queue[0]:null}}]),e}(),Prelodr=function(){function e(t,n){_classCallCheck(this,e),this.queu=new Queu,this.isShown=!1,this.isAnimating=!1,this.isStart=!1,this.options={duration:700,prefixClass:"prelodr",show:null,hide:null},"object"===("undefined"==typeof t?"undefined":_typeof(t))?t.nodeName?(this.setContainer(t),this.setOptions(n)):(this.setContainer(window.document.body),this.setOptions(t)):this.container=document.body}return _createClass(e,[{key:"merge",value:function(e,t){var n=void 0;if(t)for(n in t)t&&t[n]&&(e[n]=t[n]);return e}},{key:"setOptions",value:function(e){this.options=this.merge(this.options,e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getId",value:function(){return Math.random().toString(36).slice(2)}},{key:"show",value:function(e,t,n){var i=document.createElement("span"),s=document.createElement("span"),u=document.createElement("span");e.element=document.createElement("span"),s.appendChild(document.createTextNode(t)),i.appendChild(s),s.appendChild(u),e.element.appendChild(i),e.container.appendChild(e.element),e.element.className=e.options.prefixClass,u.className=e.options.prefixClass+"-progressbar",setTimeout(function(){var t=e.options.prefixClass+" "+e.options.prefixClass+"-in";e.element.className=t,setTimeout(function(){e.isShown=!0,e.isAnimating=!1,e.options.show&&e.options.show(e,[e.element]),n&&n()},e.options.duration)},20)}},{key:"hide",value:function(e,t){e.isShown&&(e.isShown=!1,e.isAnimating?e.interval=setInterval(function(){e.isAnimating||(clearInterval(e.interval),e.prepOut(t))},20):e.prepOut(t))}},{key:"queueWalk",value:function(e){var t=this,n=e.queu.first();n&&"in"===n.is&&n.fn(function(){e.queu.shift(),e.isStart=!1;var n=e.queu.first();n&&"out"===n.is&&(e.queu.shift(),n.fn(function(){t.queueWalk(e)}))})}},{key:"in",value:function(e){var t=this,n={id:this.getId(),is:"in",fn:function(n){return t.show(t,e,n)}};return this.queu.add(n),this.isStart||(this.isStart=!0,this.queueWalk(this)),this}},{key:"out",value:function(e){var t=this;if(this.queu.add({id:this.getId(),is:"out",fn:function(n){e&&"function"==typeof e?e(function(){t.hide(t,n)}):t.hide(t,n)}}),!this.isStart){var n=this.queu.first();n&&"out"===n.is&&n.fn(function(){t.queu.shift(),t.queueWalk(t)})}return this}},{key:"prepOut",value:function(e){var t=this,n=this.options.prefixClass+" "+this.options.prefixClass+"-out";this.isAnimating=!0,this.element.className=n,setTimeout(function(){t.options.hide&&t.options.hide(t,[]),t.container.removeChild(t.element),t.element=null,t.isAnimating=!1,t.isShown=!1,e&&e()},this.options.duration)}},{key:"isVisible",value:function(){return this.isShown}}]),e}();!function(){"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=Prelodr:"function"==typeof define&&define.amd?define([],function(){return Prelodr}):(window.Prelodr=Prelodr,window.jQuery&&(window.jQuery.fn.prelodr=function(e){var t=void 0,n=void 0;if("string"==typeof e){if(n=this.data("prelodr"),t=n[e],"undefined"!==n&&"string"==typeof e&&t)return t.apply(n,Array.prototype.slice.call(arguments,1));var i="Method "+e+" is not supported by jQuery.prelodr.";window.jQuery.error(i)}else n=new window.Prelodr(this[0],e),this.data("prelodr",n);return this}))}();